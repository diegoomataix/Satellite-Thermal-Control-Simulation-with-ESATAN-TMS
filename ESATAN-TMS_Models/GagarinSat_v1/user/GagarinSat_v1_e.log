/* ESATAN-TMS version 2020, run date 13:36 Sat 8 May 2021 */
BEGIN_MODEL GagarinSat_v1 WORKBENCH_V1 ;
BOUNDARY_CONDITION IR_TEL_Elec;
IR_TEL_Elec = TOTAL_AREA_HEAT_LOAD(
    reference = "IR_TEL_STR:surface1",
    value = .2);


INTEGER analysis_case_error_flag = 0;

DEFINE_ANALYSIS_CASE (
    analysis_case = Case_00,
    solver = "ESATAN",
    working_directory = "C:\ESATAN-TMS\ESATAN-TMS-Models\ESATAN-TMS_Models\GagarinSat_v1\esatan\Case_00",
    analysis_file = "GagarinSat_v0_Case_00.d",
    error_code =  analysis_case_error_flag,
    analysis_case_type = "Single Radiative Case",
    radiative_case = Rad_Case_00);

IF (analysis_case_error_flag == 0) THEN
    GENERATE_TEMPLATE (
        analysis_case = Case_00,
        submodel_files = FALSE,
        maxmin = TRUE,
        error_code =  analysis_case_error_flag,
        execution_block = 
"
C
      TIMEND=6059.2857
      OUTINT=605.92857
      NLOOP=100
      RELXCA=0.01
      DTIMEI=1.0
      CALL SOLCYC('SLCRNC',0.1D0,0.05D0,6059.2857D0,100,' ','NONE')
C
      CALL SLCRNC
C",
        output_block = 
"      CALL PRNDTB(' ', 'L, T, QS, QE, QA, QI, C', CURRENT)
C
      CALL DMPTMD(' ', 'NODES, CONDUCTORS, CONSTANTS', CURRENT, ' ')
",
        update = TRUE);
END_IF


IF (analysis_case_error_flag == 0) THEN
    SET_BOUNDARY_CONDITION(
        analysis_case = Case_00,
        boundary_condition = IR_TEL_Elec,
        applies = TRUE);

    SET_BOUNDARY_CONDITION(
        analysis_case = Case_00,
        boundary_condition = OBDH,
        applies = TRUE);

    SET_BOUNDARY_CONDITION(
        analysis_case = Case_00,
        boundary_condition = PLD1_RW,
        applies = TRUE);

    SET_BOUNDARY_CONDITION(
        analysis_case = Case_00,
        boundary_condition = CCD,
        applies = TRUE);

    SET_BOUNDARY_CONDITION(
        analysis_case = Case_00,
        boundary_condition = PLD2_ATCS,
        applies = TRUE);

END_IF


IF (analysis_case_error_flag == 0) THEN
    UNSET_HF_MULTIPLIERS(analysis_case = Case_00);
END_IF


IF (analysis_case_error_flag == 0) THEN
    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = IR_Tel_Obj_IR_Tel_STR,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xyneg_Plate_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_Plate_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate_Panel_xyneg_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate_Panel_xyneg_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate1_PLD2_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xyneg_Plate_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_Plate_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate_Panel_xypos_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate2_Panel_xypos_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate_Panel_xypos_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = IR_Tel_Focus_IR_Tel_STR,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = IR_Tel_Lens_IR_Tel_Obj,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate2_Panel_xypos_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xyneg_Plate2_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate1_PLD1_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xyneg_Plate2_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate2_Panel_xyneg_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = IR_Tel_CCD_IR_Tel_Focus,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_SolarPanel_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_Plate2_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_SolarPanel_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_Plate2_1,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_SolarPanel_3,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Plate2_Panel_xyneg_2,
        applies = TRUE);

    SET_USER_DEFINED_CONDUCTOR(
        analysis_case = Case_00,
        conductor = Panel_xypos_SolarPanel_4,
        applies = TRUE);

    SET_CONTACT_ZONE(
        analysis_case = Case_00,
        contact_zone = Tel_Elec_Plate2,
        applies = TRUE);

    SET_CONTACT_ZONE(
        analysis_case = Case_00,
        contact_zone = EBox_Plate_bottom,
        applies = TRUE);

END_IF


IF (analysis_case_error_flag == 0) THEN
    GENERATE_ANALYSIS_FILE (
        analysis_case = Case_00,
        title = "GagarinSat_v1_Case_00",
        error_code =  analysis_case_error_flag,
        results = "GL,TRANS_HF,TRANS_REF",
        ref_averaged = TRUE,
        ref_cyclic = TRUE,
        hf_type = "S,A,P",
        hf_averaged = TRUE,
        hf_cyclic = TRUE,
        environment = 99999,
        environment_temperature = -270.0,
        inactive = 99998);
END_IF


IF (analysis_case_error_flag == 0) THEN
    RUN_ANALYSIS(
        analysis_case = Case_00);
END_IF


DELETE analysis_case_error_flag;
END_MODEL
